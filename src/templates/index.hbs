<!doctype html>
<html>
    <head>
        <meta http-equiv="X-UA-Compatible" content="IE=edge">
        <meta charset="utf-8">
        <title>AppNexus Native Gallery</title>
        <meta name="viewport" content="minimum-scale=1.0, width=device-width, maximum-scale=1, user-scalable=no"/>
        <link href="https://vjs.zencdn.net/5.19/video-js.min.css" rel="stylesheet">
        <style>
            * {
                margin: 0;
                padding: 0;
                border: 0;
            }

            body {
                font-family: Helvetica Neue, Helvetica, Arial, sans-serif;
                font-size: 16px;
                max-width: 960px;
                margin: 0 auto;
            }

            footer {
                margin: 5px 0;
            }

            .page-header {
                padding: 55px;
            }

            .page-header h1 {
                text-align: center
            }

            .native-gallery-item {
                margin: 34px 0;
                padding-bottom: 22px;
                border-bottom: 1px solid #999;
                display: flex;
                flex-flow: row wrap;
            }

            .native-gallery-item:last-of-type {
                border-bottom: 0;
            }

            .native-gallery-item h2 {
                margin-bottom: 21px;
                width: 100%;
                flex: 1 100%;
            }

            .native-gallery-rendering-sample {
                flex: 1;
                margin-right: 8px;
                padding: 5px;
            }

            .native-gallery-code-section {
                flex: 1;
                display: flex;
            }

            .native-gallery-code-snippet {
                position: relative;
                flex: 1;
            }

            .native-gallery-code-block {
                position: absolute;
                resize: none;
                top: 0;
                bottom: 0;
                right: 0;
                left: 0;
                width: 100%;
                font-family: monospace;
                font-size: 0.8em;
                outline: none;
                padding: 5px;
                background: #f9f9f9;
            }

            .native-gallery-copy-btn {
                position: absolute;
                bottom: 2px;
                left: 2px;
                font-size: 16px;
                padding: 3px;
                border: 1px solid #000;
                background-color: #eee;
                cursor: pointer;
            }

            .native-gallery-copy-btn:hover {
                background-color: #fff;
            }

        </style>
        <script src="https://vjs.zencdn.net/5.19/video.min.js"></script>
    </head>
    <body>
        <header class='page-header'>
            <h1>Native Ad Gallery</h1>
        </header>
        <article>
            <section>
                This is a gallery of sample native creative renderings - these are meant to demonstrate the flexibility of the native format and the kinds of rendering possible with an AppNexus native creative response payload. To the right of each sample you will find a code snippet that you can copy and paste into your content. This snippet will serve a live ad.
            </section>
    <!--
            <section>
                <h2>How to use the code snippets</h2>
                <p>
                    To use these code snippets you will need to paste in the HEAD element of your page!
                </p>
                /// a code snippet here
            </section>
    -->
        </article>
    {{#each items}}
        <article class='native-gallery-item'>
            <h2>{{title}}</h2>
            <section class='native-gallery-rendering-sample'>
                {{interpolate-ad-markup}}
            </section>
            <section class='native-gallery-code-section'>
                <div class='native-gallery-code-snippet'>
                    <textarea class='native-gallery-code-block' readonly>{{interpolate-ad-markup}}</textarea>
                    <button class='native-gallery-copy-btn' type='button' title='Click to copy to your clipboard'>
                        Copy
                    </button>
                </div>
            </section>
        </article>
    {{/each}}
        <footer>
            &copy; 2017 AppNexus Inc. All Rights Reserved
        </footer>
        <script>
            function locateTextArea(button) {
                return button.previousElementSibling;
            }

            function copyContentToClipboard(textarea) {
                textarea.select();

                try {
                    var success = document.execCommand('copy');
                    console.log('Copy to clipboard', success ? 'successful' : 'unsuccessful');
                } catch(error) {
                    console.error('There was an issue copying to clipboard', error);
                }

                window.getSelection().removeAllRanges();
            }

            document.addEventListener('DOMContentLoaded', function() {
                document.querySelectorAll('.native-gallery-copy-btn').forEach(function(button) {
                    button.addEventListener('click', function(e) {
                        copyContentToClipboard(locateTextArea(e.target));
                    });
                });
            });
        </script>
    </body>
</html>